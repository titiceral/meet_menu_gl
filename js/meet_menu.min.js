var MEET_LIGHT_COLOR=new BABYLON.Color3(1,200/255,120/255),MEET_LIGHT_COLOR_TISSU=new BABYLON.Color3(.3,200/255*.3,120/255*.3),MEET_CAMERA_RADIUS=65,MEET_LIGHT_INTENSITY=10,MEET_SKY_INTENSITY=1,MEET_ANIMATION_SPEED=30,MEET_ANIMATION_LIGHT_ON_FRAME=50;class IInitialisable{constructor(){ConfigurationManager.instance().RegisterInitialisable(this)}}class MeetLogger{static LogInfoMessage(e){console.log(`[Info] meet_menu : ${e}`)}static LogDebugMessage(e){console.log(`[Debug] meet_menu : ${e}`)}static LogDebugObject(e){console.log("[Debug] meet_menu object :"),console.log(e)}}class MeetScene{constructor(e,i){this.renderer=e,this.scene=e.scene,this.objectLoaded=new SOLVeilleuse(this),this.onFileLoaded=i,this.objectLoaded.LoadObject(i,this.renderer),this._loadManualSkybox("assets/textures/skybox/skybox"),this._loadGround(),this._loadAmbientLight()}_initScene(e){var i=new BABYLON.Scene(e);return i.clearColor=new BABYLON.Color4(0,0,0,1),i}_loadManualSkybox(e){var i=BABYLON.Mesh.CreateBox("skyBox",1e3,this.scene),t=new BABYLON.StandardMaterial("skyBox",this.scene);t.backFaceCulling=!1,i.material=t,i.infiniteDistance=!0,t.disableLighting=!0,t.reflectionTexture=new BABYLON.CubeTexture(e,this.scene),t.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE,i.renderingGroupId=0}_loadGround(){var e=new BABYLON.StandardMaterial("groundTexture",this.scene);e.diffuseTexture=new BABYLON.Texture("./assets/images/brick.jpg",this.scene),e.diffuseTexture.uScale=4,e.diffuseTexture.vScale=4,e.opacityTexture=new BABYLON.Texture("./assets/textures/groundAlpha.png",this.scene),e.specularColor=new BABYLON.Color3(.01,.01,.01);var i=BABYLON.Mesh.CreateGround("ground1",400,400,2,this.scene);i.scaling=new BABYLON.Vector3(1,1,1),i.material=e,this._ground=i,this._groundCustomisable=new CustomisableMaterialTexture((new Set).add(new GLBabylonMaterial(e))),this._groundCustomisable._defaultKey="Brique",this._groundCustomisable._allowedTexture.set("Brique",new AllowedTexture("./assets/images/brick.jpg",4,4)),this._groundCustomisable._allowedTexture.set("Sable",new AllowedTexture("./assets/textures/sable.jpg",2,2)),this._groundCustomisable._allowedTexture.set("Bois",new AllowedTexture("./assets/3D/AT_sayo_wood_DIFF.jpg",6,4))}_loadAmbientLight(){var e=new BABYLON.HemisphericLight("ambientLight",new BABYLON.Vector3(100,100,0),this.scene);e.diffuse=new BABYLON.Color3(1,1,1),e.specular=new BABYLON.Color3(1,1,1),e.intensityMode=BABYLON.Light.INTENSITYMODE_LUMINOUSPOWER,e.intensity=MEET_SKY_INTENSITY,this._ambientLightCustom=new ActionAmbientLight(e,this)}_initialiseSunToMoonLights(){}_initialiseMoonToSunLights(){}}class ActionAmbientLight extends IInitialisable{constructor(e,i){super(),this._scene=i,this._ambientLight=e}InitiliseCallback(e,i){}ApplyDefault(){this._AnimatedSunToMoonAmbient(0)}eventOnActiveHandler(){this.ActionHandler()}eventOnDesactivateHandler(){this.ActionHandler()}ActionHandler(...e){MeetLogger.LogDebugObject(e),this._isNightMode?(this._AnimatedMoonToSunAmbient(),this._isNightMode=!1):(this._AnimatedSunToMoonAmbient(),this._isNightMode=!0)}_AnimatedSunToMoonAmbient(e=100){var i=new BABYLON.Animation("animationSunToMoon","diffuse",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_COLOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),t=[];t.push({frame:0,value:new BABYLON.Color3(1,1,1)}),t.push({frame:50,value:new BABYLON.Color3(.8,.8,.8)});var s=.5;t.push({frame:60,value:new BABYLON.Color3(201/255*s,201/255*s,201/255*s)}),s=.2,t.push({frame:100,value:new BABYLON.Color3(201/255*s,201/255*s,201/255*s)}),i.setKeys(t);var a=new BABYLON.Animation("animationSunToMoonSpecular","specular",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_COLOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),n=[];n.push({frame:0,value:new BABYLON.Color3(1,1,1)}),n.push({frame:40,value:new BABYLON.Color3(.8,.8,.8)});s=.5;n.push({frame:59,value:new BABYLON.Color3(1*s,120/255*s,30/255*s)}),n.push({frame:60,value:new BABYLON.Color3(0,0,0)}),s=.2,n.push({frame:100,value:new BABYLON.Color3(201/255*s,201/255*s,201/255*s)}),a.setKeys(n);var o=new BABYLON.Animation("animationSunToMoonDirection","direction",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_VECTOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),l=[];s=.2,l.push({frame:0,value:new BABYLON.Vector3(100,100,-10)}),s=.5,l.push({frame:50,value:new BABYLON.Vector3(100,20,-10)}),l.push({frame:60,value:new BABYLON.Vector3(100,10,-10)}),l.push({frame:70,value:new BABYLON.Vector3(100,100,-10)}),l.push({frame:100,value:new BABYLON.Vector3(100,100,-10)}),o.setKeys(l),this._ambientLight.animations=[],this._ambientLight.animations.push(i),this._ambientLight.animations.push(a),this._ambientLight.animations.push(o),this._scene.scene.beginAnimation(this._ambientLight,0,e,!1)}_AnimatedMoonToSunAmbient(){var e=new BABYLON.Animation("animationSunToMoon","diffuse",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_COLOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),i=[],t=.2;i.push({frame:0,value:new BABYLON.Color3(201/255*t,201/255*t,201/255*t)}),t=.5,i.push({frame:50,value:new BABYLON.Color3(201/255*t,201/255*t,201/255*t)}),i.push({frame:60,value:new BABYLON.Color3(.8,.8,.8)}),i.push({frame:100,value:new BABYLON.Color3(1,1,1)}),e.setKeys(i);var s=new BABYLON.Animation("animationSunToMoonSpecular","specular",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_COLOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE),a=[];t=.2,a.push({frame:0,value:new BABYLON.Color3(201/255*t,201/255*t,201/255*t)}),t=.5,a.push({frame:50,value:new BABYLON.Color3(201/255*t,201/255*t,201/255*t)}),a.push({frame:60,value:new BABYLON.Color3(.8,.8,.8)}),a.push({frame:100,value:new BABYLON.Color3(1,1,1)}),s.setKeys(a),this._ambientLight.animations=[],this._ambientLight.animations.push(e),this._ambientLight.animations.push(s),this._scene.scene.beginAnimation(this._ambientLight,0,100,!1)}}class IGLLight{constructor(e){this.lightIntensity=null,this.lightColor=null,e.lightIntensity&&(this.lightIntensity=e.lightIntensity),e.lightColor&&(this.lightColor=e.lightColor)}}class GLLight extends IGLLight{CopyFrom(e){this.lightColor=e.lightColor,this.lightIntensity=e.lightIntensity}}class AllowedDiffuseSurfaceProperty{constructor(e,i,t){this._diffuserProperties=e,this._lightProperties=i,this._surfaceLightColor=t}}class GLBabylonLight extends GLLight{constructor(e){super({}),this._gllight=e}ApplyProperties(){this.lightColor&&(this._gllight.diffuse=ColorRGBBabylon.FromColorRGB(this.lightColor),this._gllight.specular=ColorRGBBabylon.FromColorRGB(this.lightColor))}}class IGLMaterialDiffuser{constructor(e){this.diffuseTexture=null,this.emissiveTexture=null,this.opacityTexture=null,this.uScaleTexture=null,this.vScaleTexture=null,this.emissiveColor=null,null!=e.diffuseTexture&&(this.diffuseTexture=e.diffuseTexture),e.uScaleTexture&&(this.uScaleTexture=e.uScaleTexture),e.vScaleTexture&&(this.vScaleTexture=e.vScaleTexture),null!=e.emissiveTexture&&(this.emissiveTexture=e.emissiveTexture),null!=e.opacityTexture&&(this.opacityTexture=e.opacityTexture),e.emissiveColor&&(this.emissiveColor=e.emissiveColor)}PreloadTextures(){if(null!=this.diffuseTexture){new BABYLON.Texture(this.diffuseTexture,null)}if(null!=this.emissiveTexture){new BABYLON.Texture(this.emissiveTexture,null)}if(null!=this.opacityTexture){new BABYLON.Texture(this.opacityTexture,null)}}}class GLMaterialDiffuser extends IGLMaterialDiffuser{CopyFrom(e){this.diffuseTexture=e.diffuseTexture,this.uScaleTexture=e.uScaleTexture,this.vScaleTexture=e.vScaleTexture,this.emissiveTexture=e.emissiveTexture,this.emissiveColor=e.emissiveColor}}class ColorRGBBabylon{static FromColorRGB(e){return new BABYLON.Color3(e.r,e.g,e.b)}}class GLBabylonMaterialDiffuser extends GLMaterialDiffuser{constructor(e){super({}),this.glmaterial=e}SetDiffuseTexture(e,i,t){null!=e?(this.glmaterial.diffuseTexture=new BABYLON.Texture(e,null),this.glmaterial.diffuseTexture.uScale=null!=i?i:1,this.glmaterial.diffuseTexture.vScale=null!=t?t:1):this.glmaterial.diffuseTexture=null}SetEmissiveTexture(e,i,t){null!=e?(this.glmaterial.emissiveTexture=new BABYLON.Texture(e,null),this.glmaterial.emissiveTexture.uScale=null!=i?i:1,this.glmaterial.emissiveTexture.vScale=null!=t?t:1,this.glmaterial.emissiveTexture.wrapU=BABYLON.Texture.CLAMP_ADDRESSMODE,this.glmaterial.emissiveTexture.wrapV=BABYLON.Texture.CLAMP_ADDRESSMODE,this.glmaterial.emissiveTexture.vOffset=-20,this.glmaterial.emissiveTexture.uOffset=-20):this.glmaterial.emissiveTexture=null}SetOpacityTexture(e,i,t){null!=e?(this.glmaterial.opacityTexture=new BABYLON.Texture(e,null),this.glmaterial.opacityTexture.uScale=null!=i?i:1,this.glmaterial.opacityTexture.vScale=null!=t?t:1,this.glmaterial.opacityTexture.getAlphaFromRGB=!0):this.glmaterial.opacityTexture=null}ApplyColor(){this.emissiveColor&&(this.glmaterial.emissiveColor=ColorRGBBabylon.FromColorRGB(this.emissiveColor))}}class ActionCustomisableDiffuseSurfaceLight extends IInitialisable{constructor(e,i,t,s){super(),this._scene=s,this._surfaceLight=new GLBabylonLight(e),this._surfaceDiffuserMaterial=new GLBabylonMaterialDiffuser(i),this._surfaceLightMaterial=new GLBabylonMaterial(t),this._isNightMode=!1,this._allowedProperties=new Map}set AllowedProperties(e){this._allowedProperties=e,this._allowedProperties.forEach(e=>{e._diffuserProperties.PreloadTextures()})}InitiliseCallback(e,i){this.eventOnActiveHandlerEnd=e,this.eventOnActiveHandlerEndSender=i}ApplyDefault(){this._setCustomisable(this._defaultKey),this._AnimatedSunToMoonLights(0,0)}ApplyCustomisationHandler(...e){let i=e[1].target.name;this._setCustomisable(i),this._isNightMode&&this._AnimatedSunToMoonLights(100,100)}_setCustomisable(e){let i=this._allowedProperties.get(e);null!=i&&(this._surfaceDiffuserMaterial.CopyFrom(i._diffuserProperties),this._surfaceDiffuserMaterial.SetDiffuseTexture(i._diffuserProperties.diffuseTexture,i._diffuserProperties.uScaleTexture,i._diffuserProperties.vScaleTexture),this._surfaceDiffuserMaterial.SetEmissiveTexture(i._diffuserProperties.emissiveTexture,i._diffuserProperties.uScaleTexture,i._diffuserProperties.vScaleTexture),this._surfaceDiffuserMaterial.SetOpacityTexture(i._diffuserProperties.opacityTexture,i._diffuserProperties.uScaleTexture,i._diffuserProperties.vScaleTexture),this._surfaceDiffuserMaterial.ApplyColor(),this._surfaceLightMaterial.emissive=i._surfaceLightColor,this._surfaceLightMaterial.ApplyColors(),this._surfaceLight.CopyFrom(i._lightProperties),this._surfaceLight.ApplyProperties())}ActionHandler(...e){MeetLogger.LogDebugObject(e),this._isNightMode?(this._AnimatedMoonToSunLights(),this._isNightMode=!1):(this._AnimatedSunToMoonLights(),this._isNightMode=!0)}eventOnActiveHandler(){this.ActionHandler()}eventOnDesactivateHandler(){this.ActionHandler()}_AnimatedSunToMoonLights(e=0,i=100){var t=new BABYLON.Animation("animationSunToMoonLight","intensity",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),s=[];s.push({frame:0,value:0}),s.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:.5*this._surfaceLight.lightIntensity}),s.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+5,value:.9*this._surfaceLight.lightIntensity}),s.push({frame:100,value:1.2*this._surfaceLight.lightIntensity}),t.setKeys(s),this._surfaceLight._gllight.animations=[],this._surfaceLight._gllight.animations.push(t);var a=new BABYLON.Animation("animSunToMoonTissu","emissiveColor",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_COLOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),n=[];n.push({frame:0,value:BABYLON.Color3.Black}),n.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:BABYLON.Color3.Black}),n.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+5,value:ColorRGBBabylon.FromColorRGB(this._surfaceDiffuserMaterial.emissiveColor)}),n.push({frame:100,value:ColorRGBBabylon.FromColorRGB(this._surfaceDiffuserMaterial.emissiveColor)}),a.setKeys(n),this._surfaceDiffuserMaterial.glmaterial.animations=[],this._surfaceDiffuserMaterial.glmaterial.animations.push(a);var o=new BABYLON.Animation("animSunToMoonTissuTransparency","alpha",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),l=[];if(l.push({frame:0,value:1.9}),l.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:1.9}),l.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+1,value:1}),l.push({frame:100,value:1}),o.setKeys(l),this._surfaceDiffuserMaterial.glmaterial.animations.push(o),null!=this._surfaceDiffuserMaterial.glmaterial.emissiveTexture){var r=new BABYLON.Animation("animEmissivetextureVOffset","vOffset",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),u=new BABYLON.Animation("animEmissivetextureUOffset","uOffset",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),h=[];h.push({frame:0,value:-20}),h.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:-20}),h.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+1,value:0}),h.push({frame:100,value:0}),u.setKeys(h);var c=[];c.push({frame:0,value:-20}),c.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:-20}),c.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+1,value:-1}),c.push({frame:100,value:-1}),r.setKeys(c),this._surfaceDiffuserMaterial.glmaterial.emissiveTexture.animations=[],this._surfaceDiffuserMaterial.glmaterial.emissiveTexture.animations.push(u),this._surfaceDiffuserMaterial.glmaterial.emissiveTexture.animations.push(r)}var M=new BABYLON.Animation("animSunToMoonLightMesh","emissiveColor",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_COLOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),A=[];A.push({frame:0,value:BABYLON.Color3.Black}),A.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:BABYLON.Color3.Black}),A.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+5,value:ColorRGBBabylon.FromColorRGB(this._surfaceLightMaterial.emissive)}),A.push({frame:100,value:ColorRGBBabylon.FromColorRGB(this._surfaceLightMaterial.emissive)}),M.setKeys(A),this._surfaceLightMaterial.glmaterial.animations=[],this._surfaceLightMaterial.glmaterial.animations.push(M),this._scene.scene.beginAnimation(this._surfaceDiffuserMaterial.glmaterial,e,i,!0),this._scene.scene.beginAnimation(this._surfaceLightMaterial.glmaterial,e,i,!0),this._scene.scene.beginAnimation(this._surfaceLight._gllight,e,i,!1,1,()=>this.eventOnActiveHandlerEnd(this.eventOnActiveHandlerEndSender))}_AnimatedMoonToSunLights(){var e=new BABYLON.Animation("animationMoonToSunLight","intensity",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),i=[];i.push({frame:0,value:1.2*this._surfaceLight.lightIntensity}),i.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:.9*this._surfaceLight.lightIntensity}),i.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+5,value:.5*this._surfaceLight.lightIntensity}),i.push({frame:100,value:0}),e.setKeys(i),this._surfaceLight._gllight.animations=[],this._surfaceLight._gllight.animations.push(e);var t=new BABYLON.Animation("animMoonToSunTissu","emissiveColor",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_COLOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),s=[];if(s.push({frame:0,value:ColorRGBBabylon.FromColorRGB(this._surfaceDiffuserMaterial.emissiveColor)}),s.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:ColorRGBBabylon.FromColorRGB(this._surfaceDiffuserMaterial.emissiveColor)}),s.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+5,value:BABYLON.Color3.Black}),s.push({frame:100,value:BABYLON.Color3.Black}),t.setKeys(s),this._surfaceDiffuserMaterial.glmaterial.animations=[],this._surfaceDiffuserMaterial.glmaterial.animations.push(t),null!=this._surfaceDiffuserMaterial.glmaterial.emissiveTexture){var a=new BABYLON.Animation("animEmissivetextureVOffset","vOffset",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),n=new BABYLON.Animation("animEmissivetextureUOffset","uOffset",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),o=[];o.push({frame:0,value:0}),o.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:0}),o.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+1,value:-20}),o.push({frame:100,value:-20}),n.setKeys(o);var l=[];l.push({frame:0,value:-1}),l.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:-1}),l.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+1,value:-20}),l.push({frame:100,value:-20}),a.setKeys(l),this._surfaceDiffuserMaterial.glmaterial.emissiveTexture.animations=[],this._surfaceDiffuserMaterial.glmaterial.emissiveTexture.animations.push(n),this._surfaceDiffuserMaterial.glmaterial.emissiveTexture.animations.push(a)}var r=new BABYLON.Animation("animMoonToSunTissuTransparency","alpha",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),u=[];u.push({frame:0,value:1}),u.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:1}),u.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+1,value:1.9}),u.push({frame:100,value:1.9}),r.setKeys(u),this._surfaceDiffuserMaterial.glmaterial.animations.push(r);var h=new BABYLON.Animation("animMoonToSunLightMesh","emissiveColor",MEET_ANIMATION_SPEED,BABYLON.Animation.ANIMATIONTYPE_COLOR3,BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT),c=[];c.push({frame:0,value:ColorRGBBabylon.FromColorRGB(this._surfaceLightMaterial.emissive)}),c.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME,value:ColorRGBBabylon.FromColorRGB(this._surfaceLightMaterial.emissive)}),c.push({frame:MEET_ANIMATION_LIGHT_ON_FRAME+5,value:BABYLON.Color3.Black}),c.push({frame:100,value:BABYLON.Color3.Black}),h.setKeys(c),this._surfaceLightMaterial.glmaterial.animations=[],this._surfaceLightMaterial.glmaterial.animations.push(h),this._scene.scene.beginAnimation(this._surfaceDiffuserMaterial.glmaterial,0,100,!0),this._scene.scene.beginAnimation(this._surfaceLightMaterial.glmaterial,0,100,!0),this._scene.scene.beginAnimation(this._surfaceLight._gllight,0,100,!1,1,()=>this.eventOnActiveHandlerEnd(this.eventOnActiveHandlerEndSender))}}class AllowedColor{constructor(e,i){this._defaultKey=e,this._colorNames=i}}class AllowedTexture{constructor(e,i,t){this.strTexturePath=e,this.uScale=i,this.vScale=t}}class ConfigurationManager{constructor(){this._initialisables=new Set}static instance(){return null==this._instance&&(this._instance=new ConfigurationManager),this._instance}RegisterInitialisable(e){this._initialisables.add(e)}UnregisterInitialisable(e){this._initialisables.delete(e)}ApplyDefaults(){MeetLogger.LogInfoMessage("Configuration Manager : Apply Default"),this._initialisables.forEach(e=>{e.ApplyDefault()}),MeetLogger.LogInfoMessage("Configuration Manager : Default Applied")}}ConfigurationManager._instance=null;class ICustomisable{}class CustomisableMaterial extends IInitialisable{constructor(e){super(),this._materials=e,this._allowedColors=new Set}AddMaterial(e){this._materials.add(e)}ApplyDefault(){this._allowedColors.forEach(e=>{if(e._colorNames.has(e._defaultKey)){let i=e._colorNames.get(e._defaultKey);this._materials.forEach(e=>{e.CopyFrom(i),e.ApplyColors()})}})}ApplyCustomisationHandler(...e){let i=e[1].target.name;this._allowedColors.forEach(e=>{if(e._colorNames.has(i)){let t=e._colorNames.get(i);this._materials.forEach(e=>{e.CopyFrom(t),e.ApplyColors()})}})}}class CustomisableMaterialTexture extends IInitialisable{constructor(e){super(),this.materials=e,this._allowedTexture=new Map}ApplyCustomisationHandler(...e){let i=e[1].target.name;this._setDiffuseFromKey(i)}ApplyDefault(){this._setDiffuseFromKey(this._defaultKey)}_setDiffuseFromKey(e){let i=this._allowedTexture.get(e);null!=i&&this.materials.forEach(e=>{e.SetDiffuseTexture(i.strTexturePath,i.uScale,i.vScale)})}}class ISceneObjectLoaded{constructor(e){this._meetScene=e,this._meshes=new Set}}let g_SOLFromFile;class ISceneObjectLoadedFromFile extends ISceneObjectLoaded{constructor(e){super(e),g_SOLFromFile=this}_loadBabylonFile(e,i,t){BABYLON.SceneLoader.ImportMesh("",e,i,t,this._loadBabylonFileOnSucces)}}class IGLMaterial{constructor(e){this.diffuse=null,this.specular=null,this.emissive=null,this.ambient=null,this.specularPower=null,this.diffuseTexture=null,e.diffuse&&(this.diffuse=e.diffuse),e.specular&&(this.specular=e.specular),e.emissive&&(this.emissive=e.emissive),e.ambient&&(this.ambient=e.ambient),e.specularPower&&(this.specularPower=e.specularPower),null!=e.diffuseTexture&&(this.diffuseTexture=e.diffuseTexture)}}class GLMaterial extends IGLMaterial{CopyFrom(e){this.diffuse=e.diffuse,this.emissive=e.emissive,this.ambient=e.ambient,this.specular=e.specular,this.specularPower=e.specularPower,this.diffuseTexture=e.diffuseTexture}}class GLBabylonMaterial extends GLMaterial{constructor(e){super({}),this.glmaterial=e}SetDiffuseTexture(e,i,t){this.glmaterial.diffuseTexture=new BABYLON.Texture(e,null),this.glmaterial.diffuseTexture.uScale=i,this.glmaterial.diffuseTexture.vScale=t}ApplyColors(){this.diffuse&&(this.glmaterial.diffuseColor=ColorRGBBabylon.FromColorRGB(this.diffuse)),this.emissive&&(this.glmaterial.emissiveColor=ColorRGBBabylon.FromColorRGB(this.emissive)),this.ambient&&(this.glmaterial.ambientColor=ColorRGBBabylon.FromColorRGB(this.ambient)),this.specular&&(this.glmaterial.specularColor=ColorRGBBabylon.FromColorRGB(this.specular)),null!=this.diffuseTexture&&(""==this.diffuseTexture?(this.glmaterial.useAlphaFromDiffuseTexture=!1,this.glmaterial.diffuseTexture=null,this.glmaterial.ambientTexture=null):(this.glmaterial.diffuseTexture=new BABYLON.Texture(this.diffuseTexture,null),this.glmaterial.ambientTexture=new BABYLON.Texture(this.diffuseTexture,null)))}}class ColorRGB{constructor(e,i,t){this.r=e,this.g=i,this.b=t}}class SOLSphere extends ISceneObjectLoaded{constructor(e){super(e)}LoadObject(){let e=BABYLON.MeshBuilder.CreateSphere("sphere",{diameter:20},this._meetScene.scene);e.position.y=10;let i=new BABYLON.StandardMaterial("matSphere",this._meetScene.scene);i.specularPower=100,i.diffuseColor=new BABYLON.Color3(1/255,73/255,155/255),i.specularColor=new BABYLON.Color3(0,0,0),e.material=i,this.customisableMaterial=new CustomisableMaterial((new Set).add(new GLBabylonMaterial(i))),this.customisableMaterial._allowedColors.add(new AllowedColor("Vernis",(new Map).set("Vernis",new IGLMaterial({specular:new ColorRGB(1,1,1)})).set("Brut",new IGLMaterial({specular:new ColorRGB(.01,.01,.01)})))),this.customisableMaterial._allowedColors.add(new AllowedColor("Bleu",(new Map).set("Bleu",new IGLMaterial({diffuse:new ColorRGB(1/255,73/255,155/255)})).set("Noir",new IGLMaterial({diffuse:new ColorRGB(20/255,20/255,24/255)})).set("Rouge",new IGLMaterial({diffuse:new ColorRGB(167/255,4/255,15/255)})))),this._meshes.add(e)}}class SOLVeilleuse extends ISceneObjectLoadedFromFile{constructor(e){super(e),this.customisableMaterial=new CustomisableMaterial(new Set),this._mainLight=null}LoadObject(e,i){this._onObjectLoaded=e,this._onObjectLoadedSender=i,this._loadBabylonFile("assets/3D/","lampe3.babylon",this._meetScene.scene)}_loadBabylonFileOnSucces(e){var i=new BABYLON.SpotLight("tissuLight",new BABYLON.Vector3(0,0,0),new BABYLON.Vector3(0,0,-1),.95*Math.PI,.04,g_SOLFromFile._meetScene.scene);let t=null,s=null;var a=new BABYLON.GlowLayer("glow",g_SOLFromFile._meetScene.scene);e.forEach(e=>{if(g_SOLFromFile._meshes.add(e),e.position=new BABYLON.Vector3(e.position.x+8.5,e.position.y+0,e.position.z-8.5),"ampoule"==e.name)t=e,e.material.subMaterials[0].emissiveColor=MEET_LIGHT_COLOR,e.material.emissiveTexture=null,i.position.x=0,i.position.y=8.5,i.position.z=-10,i.intensityMode=BABYLON.Light.INTENSITYMODE_LUMINOUSPOWER,i.diffuse=MEET_LIGHT_COLOR,i.intensity=MEET_LIGHT_INTENSITY,i.specular=new BABYLON.Color3(0,0,0);else if("tissu"==e.name){s=e;let i=e.material;i.opacityTexture=new BABYLON.Texture("./assets/3D/tissuAlpha.png",g_SOLFromFile._meetScene.scene),i.opacityTexture.getAlphaFromRGB=!0,i.emissiveColor=MEET_LIGHT_COLOR_TISSU,i.emissiveTexture=new BABYLON.Texture("./assets/3D/tissu_savane_emissive.jpg",g_SOLFromFile._meetScene.scene),i.emissiveTexture.wrapU=BABYLON.Texture.CLAMP_ADDRESSMODE,i.emissiveTexture.wrapV=BABYLON.Texture.CLAMP_ADDRESSMODE,a.intensity=.8,a.blurKernelSize=20}else g_SOLFromFile.customisableMaterial.AddMaterial(new GLBabylonMaterial(e.material)),e.material.bumpTexture=new BABYLON.Texture("./assets/3D/AT_sayo_wood_NormalMap.png",g_SOLFromFile._meetScene.scene),e.material.invertNormalMapX=!0,e.material.invertNormalMapY=!0,e.material.specularTexture=null,e.material.specularPower=7}),g_SOLFromFile._mainLight=new ActionCustomisableDiffuseSurfaceLight(i,s.material,t.material.subMaterials[0],g_SOLFromFile._meetScene),g_SOLFromFile._initialiseCustomisable(),g_SOLFromFile._onObjectLoaded(g_SOLFromFile._onObjectLoadedSender)}_initialiseCustomisable(){this._meetScene.objectLoaded=g_SOLFromFile,this.customisableMaterial._allowedColors.add(new AllowedColor("Vernis",(new Map).set("Vernis",new IGLMaterial({diffuse:new ColorRGB(1,1,1),specular:new ColorRGB(.2,.2,.2),specularPower:10,diffuseTexture:"./assets/3D/AT_sayo_wood_DIFF.jpg"})).set("Brut",new IGLMaterial({diffuse:new ColorRGB(1,1,1),specular:new ColorRGB(.01,.01,.01),diffuseTexture:"./assets/3D/AT_sayo_wood_DIFF.jpg"})).set("Violet",new IGLMaterial({diffuse:new ColorRGB(90/255,25/255,59/255),specular:new ColorRGB(.1,.1,.1),specularPower:12,diffuseTexture:""}))));let e=this._mainLight;e._defaultKey="Savane";let i=(new Map).set("Savane",new AllowedDiffuseSurfaceProperty(new IGLMaterialDiffuser({diffuseTexture:"./assets/3D/tissu_savane.jpg",emissiveTexture:"./assets/3D/tissu_savane_emissive.jpg",opacityTexture:"./assets/3D/tissuAlpha.png",emissiveColor:MEET_LIGHT_COLOR_TISSU}),new IGLLight({lightIntensity:MEET_LIGHT_INTENSITY,lightColor:MEET_LIGHT_COLOR}),MEET_LIGHT_COLOR_TISSU)).set("Rouge",new AllowedDiffuseSurfaceProperty(new IGLMaterialDiffuser({diffuseTexture:"./assets/textures/tissu_red.png",emissiveTexture:null,opacityTexture:"./assets/3D/tissuAlpha_red.png",emissiveColor:new ColorRGB(.3,.03,0)}),new IGLLight({lightIntensity:MEET_LIGHT_INTENSITY,lightColor:new ColorRGB(.3,.03,0)}),new ColorRGB(.3,.15,0))).set("Princesses",new AllowedDiffuseSurfaceProperty(new IGLMaterialDiffuser({diffuseTexture:"./assets/textures/tissu_frozen.jpg",emissiveTexture:"./assets/textures/tissu_frozen_emissive.jpg",opacityTexture:"./assets/3D/tissuAlpha.png",uScaleTexture:.8,vScaleTexture:1,emissiveColor:MEET_LIGHT_COLOR_TISSU}),new IGLLight({lightIntensity:MEET_LIGHT_INTENSITY,lightColor:MEET_LIGHT_COLOR}),MEET_LIGHT_COLOR_TISSU));e.AllowedProperties=i}}class Vector2D{constructor(e,i){this.x=e,this.y=i}}class MeetLoadingScreen{constructor(e,i="black",t="",s=""){this._renderingCanvas=e,this._loadingDivBackgroundColor=i,this.defaultLogoUrl=t,this.defaultSpinnerUrl=s,this._loadingText="",this._resizeLoadingUI=(()=>{var e=this._renderingCanvas.getBoundingClientRect(),i=window.getComputedStyle(this._renderingCanvas).position;this._loadingDiv&&(this._loadingDiv.style.position="fixed"===i?"fixed":"absolute",this._loadingDiv.style.left=e.left+"px",this._loadingDiv.style.top=e.top+"px",this._loadingDiv.style.width=e.width+"px",this._loadingDiv.style.height=e.height+"px")})}displayLoadingUI(){if(this._loadingDiv)return;this._loadingDiv=document.createElement("div"),this._loadingDiv.id="babylonjsLoadingDiv",this._loadingDiv.style.opacity="0",this._loadingDiv.style.transition="opacity 1.5s ease",this._loadingDiv.style.pointerEvents="none",this._loadingTextDiv=document.createElement("div"),this._loadingTextDiv.style.position="absolute",this._loadingTextDiv.style.left="0",this._loadingTextDiv.style.top="50%",this._loadingTextDiv.style.marginTop="80px",this._loadingTextDiv.style.width="100%",this._loadingTextDiv.style.height="20px",this._loadingTextDiv.style.fontFamily="Arial",this._loadingTextDiv.style.fontSize="14px",this._loadingTextDiv.style.color="white",this._loadingTextDiv.style.textAlign="center",this._loadingTextDiv.innerHTML="Loading",this._loadingDiv.appendChild(this._loadingTextDiv),this._loadingTextDiv.innerHTML=this._loadingText;var e=document.createElement("style");e.type="text/css";e.innerHTML="@-webkit-keyframes spin1 {                    0% { -webkit-transform: rotate(0deg);}\n                    100% { -webkit-transform: rotate(360deg);}\n                }                @keyframes spin1 {                    0% { transform: rotate(0deg);}\n                    100% { transform: rotate(360deg);}\n                }",document.getElementsByTagName("head")[0].appendChild(e);const i=!!window.SVGSVGElement;var t=new Image;this.defaultLogoUrl?t.src=this.defaultLogoUrl:t.src=i?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxODAuMTcgMjA4LjA0Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9LmNscy0ye2ZpbGw6I2UwNjg0Yjt9LmNscy0ze2ZpbGw6I2JiNDY0Yjt9LmNscy00e2ZpbGw6I2UwZGVkODt9LmNscy01e2ZpbGw6I2Q1ZDJjYTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPkJhYnlsb25Mb2dvPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iUGFnZV9FbGVtZW50cyIgZGF0YS1uYW1lPSJQYWdlIEVsZW1lbnRzIj48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik05MC4wOSwwLDAsNTJWMTU2bDkwLjA5LDUyLDkwLjA4LTUyVjUyWiIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxODAuMTcgNTIuMDEgMTUxLjk3IDM1LjczIDEyNC44NSA1MS4zOSAxNTMuMDUgNjcuNjcgMTgwLjE3IDUyLjAxIi8+PHBvbHlnb24gY2xhc3M9ImNscy0yIiBwb2ludHM9IjI3LjEyIDY3LjY3IDExNy4yMSAxNS42NiA5MC4wOCAwIDAgNTIuMDEgMjcuMTIgNjcuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTIiIHBvaW50cz0iNjEuODkgMTIwLjMgOTAuMDggMTM2LjU4IDExOC4yOCAxMjAuMyA5MC4wOCAxMDQuMDIgNjEuODkgMTIwLjMiLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iMTUzLjA1IDY3LjY3IDE1My4wNSAxNDAuMzcgOTAuMDggMTc2LjcyIDI3LjEyIDE0MC4zNyAyNy4xMiA2Ny42NyAwIDUyLjAxIDAgMTU2LjAzIDkwLjA4IDIwOC4wNCAxODAuMTcgMTU2LjAzIDE4MC4xNyA1Mi4wMSAxNTMuMDUgNjcuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iOTAuMDggNzEuNDYgNjEuODkgODcuNzQgNjEuODkgMTIwLjMgOTAuMDggMTA0LjAyIDExOC4yOCAxMjAuMyAxMTguMjggODcuNzQgOTAuMDggNzEuNDYiLz48cG9seWdvbiBjbGFzcz0iY2xzLTQiIHBvaW50cz0iMTUzLjA1IDY3LjY3IDExOC4yOCA4Ny43NCAxMTguMjggMTIwLjMgOTAuMDggMTM2LjU4IDkwLjA4IDE3Ni43MiAxNTMuMDUgMTQwLjM3IDE1My4wNSA2Ny42NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtNSIgcG9pbnRzPSIyNy4xMiA2Ny42NyA2MS44OSA4Ny43NCA2MS44OSAxMjAuMyA5MC4wOCAxMzYuNTggOTAuMDggMTc2LjcyIDI3LjEyIDE0MC4zNyAyNy4xMiA2Ny42NyIvPjwvZz48L2c+PC9zdmc+":"https://cdn.babylonjs.com/Assets/babylonLogo.png",t.style.position="absolute",t.style.left="40%",t.style.top="40%",t.style.width="20%",t.style.height="20%";var s=new Image;this.defaultSpinnerUrl?s.src=this.defaultSpinnerUrl:s.src=i?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzOTIgMzkyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2UwNjg0Yjt9LmNscy0ye2ZpbGw6bm9uZTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlNwaW5uZXJJY29uPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iU3Bpbm5lciI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNDAuMjEsMTI2LjQzYzMuNy03LjMxLDcuNjctMTQuNDQsMTItMjEuMzJsMy4zNi01LjEsMy41Mi01YzEuMjMtMS42MywyLjQxLTMuMjksMy42NS00LjkxczIuNTMtMy4yMSwzLjgyLTQuNzlBMTg1LjIsMTg1LjIsMCwwLDEsODMuNCw2Ny40M2EyMDgsMjA4LDAsMCwxLDE5LTE1LjY2YzMuMzUtMi40MSw2Ljc0LTQuNzgsMTAuMjUtN3M3LjExLTQuMjgsMTAuNzUtNi4zMmM3LjI5LTQsMTQuNzMtOCwyMi41My0xMS40OSwzLjktMS43Miw3Ljg4LTMuMywxMi00LjY0YTEwNC4yMiwxMDQuMjIsMCwwLDEsMTIuNDQtMy4yMyw2Mi40NCw2Mi40NCwwLDAsMSwxMi43OC0xLjM5QTI1LjkyLDI1LjkyLDAsMCwxLDE5NiwyMS40NGE2LjU1LDYuNTUsMCwwLDEsMi4wNSw5LDYuNjYsNi42NiwwLDAsMS0xLjY0LDEuNzhsLS40MS4yOWEyMi4wNywyMi4wNywwLDAsMS01Ljc4LDMsMzAuNDIsMzAuNDIsMCwwLDEtNS42NywxLjYyLDM3LjgyLDM3LjgyLDAsMCwxLTUuNjkuNzFjLTEsMC0xLjkuMTgtMi44NS4yNmwtMi44NS4yNHEtNS43Mi41MS0xMS40OCwxLjFjLTMuODQuNC03LjcxLjgyLTExLjU4LDEuNGExMTIuMzQsMTEyLjM0LDAsMCwwLTIyLjk0LDUuNjFjLTMuNzIsMS4zNS03LjM0LDMtMTAuOTQsNC42NHMtNy4xNCwzLjUxLTEwLjYsNS41MUExNTEuNiwxNTEuNiwwLDAsMCw2OC41Niw4N0M2Ny4yMyw4OC40OCw2Niw5MCw2NC42NCw5MS41NnMtMi41MSwzLjE1LTMuNzUsNC43M2wtMy41NCw0LjljLTEuMTMsMS42Ni0yLjIzLDMuMzUtMy4zMyw1YTEyNywxMjcsMCwwLDAtMTAuOTMsMjEuNDksMS41OCwxLjU4LDAsMSwxLTMtMS4xNVM0MC4xOSwxMjYuNDcsNDAuMjEsMTI2LjQzWiIvPjxyZWN0IGNsYXNzPSJjbHMtMiIgd2lkdGg9IjM5MiIgaGVpZ2h0PSIzOTIiLz48L2c+PC9nPjwvc3ZnPg==":"https://cdn.babylonjs.com/Assets/loadingIcon.png",s.style.position="absolute",s.style.left="30%",s.style.top="30%",s.style.width="40%",s.style.height="40%",s.style.animation="spin1 0.75s infinite linear",s.style.webkitAnimation="spin1 0.75s infinite linear",s.style.transformOrigin="50% 50%",s.style.webkitTransformOrigin="50% 50%";const a=16,n=18.5,o=30,l=30;t.style.width=`${a}vh`,t.style.height=`${n}vh`,t.style.left=`calc(50% - ${a/2}vh)`,t.style.top=`calc(50% - ${n/2}vh)`,s.style.width=`${o}vh`,s.style.height=`${l}vh`,s.style.left=`calc(50% - ${o/2}vh)`,s.style.top=`calc(50% - ${l/2}vh)`,this._loadingDiv.appendChild(t),this._loadingDiv.appendChild(s),this._resizeLoadingUI(),window.addEventListener("resize",this._resizeLoadingUI),this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor,document.body.appendChild(this._loadingDiv),this._loadingDiv.style.opacity="1"}hideLoadingUI(){if(this._loadingDiv){this._loadingDiv.style.opacity="0",this._loadingDiv.addEventListener("transitionend",()=>{this._loadingDiv&&(this._loadingDiv.parentElement&&this._loadingDiv.parentElement.removeChild(this._loadingDiv),window.removeEventListener("resize",this._resizeLoadingUI),this._loadingDiv=null)})}}set loadingUIText(e){this._loadingText=e,this._loadingTextDiv&&(this._loadingTextDiv.innerHTML=this._loadingText)}get loadingUIText(){return this._loadingText}get loadingUIBackgroundColor(){return this._loadingDivBackgroundColor}set loadingUIBackgroundColor(e){this._loadingDivBackgroundColor=e,this._loadingDiv&&(this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor)}}class IButton{constructor(e){this.positionLocal=new Vector2D(0,0),this.positionWorld=new Vector2D(0,0),this.isClicked=!1,this.anchorMesh=e}get isClicked(){return this._isClicked}set isClicked(e){this._isClicked=e,null!=this.guiButton&&this.guiButton.DisplayIsClicked(this._isClicked)}InitialiseButton(){GuiFactoryManager.Instance().GetCenterMenu(null).AddButton(this.guiButton),this.guiButton.SetAnchor(this.anchorMesh)}SetPosition(e,i,t){this.positionLocal=new Vector2D(e,i),this.positionWorld=new Vector2D(Math.floor(e+t.x),Math.floor(i+t.y)),this.guiButton.SetPosition(this.positionWorld)}}class GuiFactoryManager{static Instance(){return null==this._factory&&(this._factory=new GuiFactoryBabylon),GuiFactoryManager._factory}}GuiFactoryManager._factory=null;class IButtonImg extends IButton{constructor(e,i,t){super(e),this.strTexturePath=t,this.guiButton=GuiFactoryManager.Instance().CreateGuiImageButton(i,t),super.InitialiseButton()}}class ActionButtonImg extends IButtonImg{constructor(e,i,t,s,a){super(e,i,t),this.strTexturePathClicked=s,this.isClickedDone=!0,this.actionSenders=a,this.guiButton.AddEventOnClick(this.OnClicked,this),a.forEach(e=>{e.InitiliseCallback(this.OnClickedDone,this)})}get isClicked(){return this._isClicked}set isClicked(e){this._isClicked=e,null!=this.guiButton&&this.guiButton.DisplayIsClicked(0==this.isClickedDone)}OnProgress(e){throw new Error("Method not implemented.")}OnClicked(){this.isClickedDone=!1,this.isClicked?(this.isClicked=!1,this.actionSenders.forEach(e=>{e.eventOnActiveHandler()})):(this.isClicked=!0,this.actionSenders.forEach(e=>{e.eventOnDesactivateHandler()}))}OnClickedDone(e){e.isClicked?e.guiButton.ChangePicture(e.strTexturePathClicked):e.guiButton.ChangePicture(e.strTexturePath),e.isClickedDone=!0,e.isClicked=e.isClicked}}class ActionButtonText extends IButton{constructor(e,i,t){super(e),this.guiButton=GuiFactoryManager.Instance().CreateGuiTextButton(i,t),super.InitialiseButton()}OnProgress(e){throw new Error("Method not implemented.")}OnClicked(){this.isClicked?this.eventOnDesactivateHandler():this.eventOnActiveHandler()}}class ActionButtonTextRadio extends IButton{constructor(e,i,t,s,a,n,o=!1){super(e),this.guiButton=GuiFactoryManager.Instance().CreateGuiRadioButton(i,t,s,o,n),this.radioBtnLinker=a,super.InitialiseButton()}get isClicked(){return this._isClicked}set isClicked(e){this._isClicked=e}OnProgress(e){throw new Error("Method not implemented.")}OnClicked(){throw new Error("Method not implemented.")}}class GuiButtonBabylon{constructor(e){this.control=e,this.control.isFocusInvisible=!1}IsVisible(e){this.control.isVisible=e,this.control.isVisible?this.control.alpha=1:this.control.alpha=0}AddEventOnClick(e,i){this.control.onPointerClickObservable.add(e),this.control.onPointerClickObservable.observers[0].scope=i}SetAnchor(e){this.control.linkWithMesh(e)}SetPosition(e){this.control.linkOffsetX=e.x,this.control.linkOffsetY=e.y}DisplayIsClicked(e){this.control.background=e?"#ffffff66":"white"}ChangePicture(e){this.control.image.source=e}}class IGuiPanel{}class GuiScreenBabylon{constructor(e){this._screen=e}AddButton(e){this._screen.addControl(e.control)}}class GuiPanelBabylon{constructor(e){this.control=e}SetPosition(e){this.control.linkOffsetX=e.x,this.control.linkOffsetY=e.y}SetAnchor(e){this.control.linkWithMesh(e)}AddControl(e){this.control.addControl(e.control)}}class GuiFactoryBabylon{constructor(){this._screenGui=null}CreateGuiTextButton(e,i){var t=BABYLON.GUI.Button.CreateSimpleButton("btn"+e,i);return t.width=.2,t.height="40px",t.cornerRadius=20,t.color="white",t.background="green",t.color="Orange",t.thickness=4,t.background="green",t.hoverCursor="pointer",t.isPointerBlocker=!0,new GuiButtonBabylon(t)}CreateGuiRadioButton(e,i,t,s,a){var n=new BABYLON.GUI.RadioButton;n.name=e,n.width="24px",n.height="24px",n.color="#fd7e14ff",n.background="#ffffff66",n.isChecked=s,n.group=t,null!=a&&(n.onPointerClickObservable.add(a.ApplyCustomisationHandler),n.onPointerClickObservable.observers[0].scope=a);let o=BABYLON.GUI.Control.AddHeader(n,i,"150px",{isHorizontal:!0,controlFirst:!0});return o.height="30px",o.paddingLeft="30px",o.color="white",new GuiButtonBabylon(o)}CreateGuiImageButton(e,i){var t=BABYLON.GUI.Button.CreateImageOnlyButton(e,i);return t.width="32px",t.height="32px",t.left="10px",t.color="white",t.cornerRadius=20,t.background="#ffffff66",t.hoverCursor="pointer",new GuiButtonBabylon(t)}GetCenterMenu(e){return null==this._screenGui&&(this._screenGui=new GuiScreenBabylon(BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("centerMenu",!0,e))),this._screenGui}CreatePanel(){return new GuiPanelBabylon(new BABYLON.GUI.StackPanel)}}class IGuiButton{}class GuiControlBabylon{}class IMenu extends IButtonImg{constructor(e,i,t,s,a){super(e,i,t),this.displayVector=s,this.subMenus=a,this.Close(),this.ComputeButtonPositions(),this.guiButton.AddEventOnClick(this.OnClicked,this)}Open(){this.subMenus.forEach(e=>{e.guiButton.IsVisible(!0)}),this.isClicked=!0}Close(){this.subMenus.forEach(e=>{e instanceof IMenu&&e.Close(),e.guiButton.IsVisible(!1),e.isClicked=!1}),this.isClicked=!1}OnClicked(){this.isClicked?this.Close():this.Open()}SetPosition(e,i,t){super.SetPosition(e,i,t),this.ComputeButtonPositions()}}class RadioBtnLinker{constructor(e){this.radioButtons=new Set}RegisterRadioBtn(e){this.radioButtons.add(e)}}class MenuCircle extends IMenu{constructor(e,i,t,s,a){super(e,i,t,s,a)}ComputeButtonPositions(){if(0!=this.subMenus.length){let e=2*Math.PI/this.subMenus.length,i=Math.atan2(this.displayVector.y,this.displayVector.x),t=this.displayVector.x*this.displayVector.x+this.displayVector.y*this.displayVector.y,s=1;0!=t&&(s=Math.sqrt(t));let a=0,n=0;for(let t=0;t<this.subMenus.length;t++)a=Math.cos(t*e+i)*s,n=Math.sin(t*e+i)*s,this.subMenus[t].SetPosition(a,n,this.positionWorld)}}OnProgress(e){throw new Error("Method not implemented.")}}class MenuLine extends IMenu{constructor(e,i,t,s,a){super(e,i,t,s,a)}ComputeButtonPositions(){if(0!=this.subMenus.length){let e=0,i=0;for(let t=0;t<this.subMenus.length;t++)e=(t+1)*this.displayVector.x,i=(t+1)*this.displayVector.y,this.subMenus[t].SetPosition(e,i,this.positionWorld)}}OnProgress(e){throw new Error("Method not implemented.")}}